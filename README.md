# MindTracking API

MindTracking √© uma API robusta para suporte emocional e orienta√ß√£o psicol√≥gica. O sistema oferece question√°rios di√°rios para acompanhamento emocional, gera diagn√≥sticos personalizados e conta com a **Athena**, uma intelig√™ncia artificial especializada em atendimento psicol√≥gico que interage via chat para oferecer acolhimento, dicas e reflex√µes personalizadas.

## ‚ú® Vis√£o Geral

- **Question√°rios Di√°rios**: Sistema automatizado de envio de question√°rios para monitoramento emocional cont√≠nuo
- **Diagn√≥sticos Inteligentes**: Gera√ß√£o autom√°tica de notas e diagn√≥sticos emocionais baseados nas respostas
- **Athena - IA Psicol√≥gica**: Chatbot especializado que utiliza t√©cnicas avan√ßadas de psicologia para acolher, orientar e sugerir pr√°ticas de bem-estar
- **Sistema de Autentica√ß√£o Seguro**: Cadastro, login e autentica√ß√£o JWT com verifica√ß√£o de email
- **Acompanhamento de Progresso**: Sistema de pontua√ß√£o e n√≠vel emocional para acompanhar evolu√ß√£o

## üöÄ Funcionalidades Principais

### ü§ñ **Chatbot Athena**
- Suporte emocional 24/7 via intelig√™ncia artificial
- Dicas personalizadas baseadas no perfil do usu√°rio
- Diagn√≥stico emocional autom√°tico ap√≥s 10 intera√ß√µes
- Abordagem psicol√≥gica baseada em t√©cnicas freudianas e conceitos de Jung

### üìä **Sistema de Question√°rios**
- **Question√°rio Inicial**: Avalia√ß√£o completa do perfil emocional do usu√°rio
- **Question√°rios Di√°rios**: Monitoramento cont√≠nuo do bem-estar
- **An√°lise Autom√°tica**: Gera√ß√£o de diagn√≥sticos e sugest√µes baseados nas respostas

### üîê **Autentica√ß√£o e Seguran√ßa**
- Registro com verifica√ß√£o de email obrigat√≥ria
- Login seguro com JWT
- Recupera√ß√£o de senha via email
- Criptografia de senhas com bcrypt
- Middleware de autentica√ß√£o para rotas protegidas

### üìà **Acompanhamento Emocional**
- Sistema de pontua√ß√£o emocional
- Hist√≥rico de diagn√≥sticos
- Evolu√ß√£o do bem-estar ao longo do tempo
- Dicas personalizadas baseadas no progresso

### üìù **Sistema de Di√°rio**
- Entradas de di√°rio com an√°lise autom√°tica da Athena
- Identifica√ß√£o de emo√ß√µes predominantes
- Avalia√ß√£o da intensidade emocional (baixa, moderada, alta)
- Coment√°rios personalizados da IA com acolhimento, aprova√ß√£o, incentivo ou dicas pr√°ticas
- Hist√≥rico completo de reflex√µes e sentimentos

## üõ†Ô∏è Tecnologias Utilizadas

### **Backend**
- **Node.js** (v20+) - Runtime JavaScript
- **Express.js** - Framework web
- **PostgreSQL** - Banco de dados relacional
- **JWT** - Autentica√ß√£o e autoriza√ß√£o

### **Intelig√™ncia Artificial**
- **OpenAI** - Integra√ß√£o com IA
- **gpt-4o-mini** - Modelo de linguagem avan√ßado

### **Comunica√ß√£o**
- **Nodemailer** - Envio de emails
- **CORS** - Cross-origin resource sharing

### **Seguran√ßa**
- **bcrypt** - Criptografia de senhas
- **dotenv** - Gerenciamento de vari√°veis de ambiente

### **DevOps**
- **Docker** - Containeriza√ß√£o
- **Nodemon** - Desenvolvimento com hot-reload

## üì¶ Instala√ß√£o e Configura√ß√£o

### **Pr√©-requisitos**
- [Node.js](https://nodejs.org/) (v20 ou superior)
- [PostgreSQL](https://www.postgresql.org/) (v12 ou superior)
- [Git](https://git-scm.com/)

### **1. Clone o Reposit√≥rio**
```bash
git clone <URL_DO_REPOSITORIO>
cd MindTracking-API
```

### **2. Instale as Depend√™ncias**
```bash
npm install
```

### **3. Configure as Vari√°veis de Ambiente**
Crie um arquivo `.env` na pasta `config/` com o seguinte conte√∫do:

```env
# Configura√ß√µes do Servidor
PORT=3000
NODE_ENV=development

# Configura√ß√µes do Banco de Dados
DB_USER=seu_usuario_postgres
DB_PASSWORD=sua_senha_postgres
DB_HOST=localhost
DB_NAME=mindtracking_db
PORTA=5432

# Configura√ß√µes de Seguran√ßa
JWT_KEY=sua_chave_secreta_jwt_super_segura

# Configura√ß√µes da IA (Groq)
API_KEY=sua_chave_api_groq

# Configura√ß√µes de Email
EMAIL_USER=seu_email@gmail.com
EMAIL_PASS=sua_senha_de_app_gmail
```

### **4. Configure o Banco de Dados**
```sql
-- Crie o banco de dados
CREATE DATABASE mindtracking_db;

-- Execute os scripts de cria√ß√£o das tabelas
-- (consulte a documenta√ß√£o do banco para os scripts completos)
```

### **5. Inicie a Aplica√ß√£o**
```bash
# Desenvolvimento
npm start

# Produ√ß√£o
npm run start:prod
```

A API estar√° dispon√≠vel em `http://localhost:3000`

## üê≥ Docker (Opcional)

### **Build da Imagem**
```bash
docker build -t mindtracking-api .
```

### **Executar Container**
```bash
docker run -p 3000:3000 --env-file ./config/.env mindtracking-api
```

## üìö Documenta√ß√£o da API

### **Base URL**
```
http://localhost:3000
```

### **Endpoints Principais**

#### **üîê Autentica√ß√£o**
- `POST /auth/register` - Registro de usu√°rio
- `POST /auth/login` - Login
- `POST /auth/verify-email` - Verifica√ß√£o de email
- `POST /auth/recuperar-senha` - Solicitar recupera√ß√£o de senha
- `POST /auth/verificar-codigo` - Verificar c√≥digo de recupera√ß√£o
- `POST /auth/redefinir-senha` - Redefinir senha
- `DELETE /auth/delete-account` - Excluir conta (autenticado)

#### **ü§ñ Chat com Athena**
- `POST /api/chat` - Enviar mensagem para Athena (autenticado)
- `GET /api/diagnostico` - Obter diagn√≥stico mais recente (autenticado)

#### **üìä Question√°rios**
- `POST /questionario/inicial` - Enviar question√°rio inicial (autenticado)
- `GET /questionario/diario` - Obter question√°rio di√°rio (autenticado)
- `POST /questionario/diario` - Enviar resposta do question√°rio di√°rio (autenticado)
- `GET /questionario/historico` - Obter hist√≥rico de question√°rios (autenticado)

#### **üìù Di√°rio**
- `POST /api/diario` - Criar nova entrada no di√°rio (autenticado)
  - **Body**: `{ "texto": "string", "titulo": "string" }` (texto e t√≠tulo obrigat√≥rios e n√£o podem estar vazios)
  - **Retorna**: Entrada criada com an√°lise da Athena (emo√ß√£o predominante, intensidade emocional: "baixa", "moderada" ou "alta", coment√°rio)
- `GET /api/diario` - Obter todas as entradas do di√°rio (autenticado)
  - **Retorna**: Lista de todas as entradas ordenadas por data (mais recente primeiro)

### **Exemplo de Uso**

#### **Registro de Usu√°rio**
```bash
curl -X POST http://localhost:3000/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "Jo√£o Silva",
    "email": "joao@email.com",
    "senha": "senha123",
    "confirmarSenha": "senha123",
    "data_nascimento": "1990-01-01"
  }'
```

#### **Chat com Athena**
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer SEU_TOKEN_JWT" \
  -d '{
    "message": "Estou me sentindo ansioso hoje"
  }'
```

#### **Criar Entrada no Di√°rio**
```bash
curl -X POST http://localhost:3000/api/diario \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer SEU_TOKEN_JWT" \
  -d '{
    "titulo": "Dia de desafios no trabalho",
    "texto": "Hoje foi um dia dif√≠cil no trabalho, mas consegui resolver alguns problemas importantes."
  }'
```

#### **Obter Entradas do Di√°rio**
```bash
curl -X GET http://localhost:3000/api/diario \
  -H "Authorization: Bearer SEU_TOKEN_JWT"
```

**Resposta do POST /api/diario:**
```json
{
  "success": true,
  "message": "Entrada do di√°rio criada com sucesso e an√°lise da Athena conclu√≠da.",
  "entrada": {
    "id": 1,
    "usuario_id": 123,
    "data_hora": "2024-01-15T10:30:00Z",
    "titulo": "Dia de desafios no trabalho",
    "texto": "Hoje foi um dia dif√≠cil no trabalho...",
    "emocao_predominante": "ansiedade",
    "intensidade_emocional": "moderada",
    "comentario_athena": "Entendo que voc√™ est√° enfrentando desafios no trabalho. Mantenha-se forte e lembre-se de respirar fundo quando se sentir sobrecarregado."
  }
}
```

**Erro quando texto est√° vazio:**
```json
{
  "success": false,
  "message": "O campo texto √© obrigat√≥rio e n√£o pode estar vazio"
}
```

**Erro quando t√≠tulo est√° vazio:**
```json
{
  "success": false,
  "message": "O campo t√≠tulo √© obrigat√≥rio e n√£o pode estar vazio"
}
```

**Resposta do GET /api/diario:**
```json
{
  "success": true,
  "message": "Entradas do di√°rio recuperadas com sucesso",
  "entradas": [
    {
      "data_hora": "2024-01-15T10:30:00Z",
      "titulo": "Dia de grandes conquistas",
      "texto": "Estou muito feliz com minhas conquistas!",
      "emocao_predominante": "felicidade",
      "intensidade_emocional": "alta",
      "comentario_athena": "Parab√©ns! √â maravilhoso ver sua alegria! Continue celebrando suas conquistas e compartilhe sua felicidade com quem voc√™ ama."
    },
    {
      "data_hora": "2024-01-14T15:20:00Z",
      "titulo": "Dia de desafios no trabalho",
      "texto": "Hoje foi um dia dif√≠cil no trabalho...",
      "emocao_predominante": "ansiedade",
      "intensidade_emocional": "moderada",
      "comentario_athena": "Entendo que voc√™ est√° enfrentando desafios. Mantenha-se forte e considere fazer uma caminhada para aliviar a tens√£o."
    },
    {
      "data_hora": "2024-01-13T09:45:00Z",
      "titulo": "Momento de tranquilidade",
      "texto": "Estou um pouco cansado, mas tranquilo.",
      "emocao_predominante": "calma",
      "intensidade_emocional": "baixa",
      "comentario_athena": "Excelente! √â importante respeitar seus limites e descansar quando necess√°rio. Continue cuidando de si mesmo."
    }
  ]
}
```

### **Campos da Entrada do Di√°rio**
- **titulo**: Campo obrigat√≥rio para dar um t√≠tulo √† entrada (string, n√£o pode estar vazio)
- **texto**: Campo obrigat√≥rio com o conte√∫do da entrada (string, n√£o pode estar vazio)

### **Valores de Intensidade Emocional**
A intensidade emocional √© sempre retornada como texto com um dos seguintes valores:
- **"baixa"**: Emo√ß√µes suaves ou sutis
- **"moderada"**: Emo√ß√µes de intensidade m√©dia
- **"alta"**: Emo√ß√µes intensas ou fortes

### **Coment√°rios da Athena**
Os coment√°rios da Athena sempre incluem pelo menos uma das seguintes abordagens:
- **Acolhimento**: "Entendo", "Compreendo", "Estou aqui para voc√™"
- **Aprova√ß√£o**: "Parab√©ns", "Excelente", "Muito bem"
- **Incentivo**: "Continue assim", "Voc√™ consegue", "Mantenha-se forte"
- **Dicas pr√°ticas**: Sugest√µes espec√≠ficas para melhorar o bem-estar

## üèóÔ∏è Estrutura do Projeto

```
MindTracking-API/
‚îú‚îÄ‚îÄ config/                    # Configura√ß√µes do sistema
‚îÇ   ‚îú‚îÄ‚îÄ database.js           # Configura√ß√£o PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ emailConfig.js        # Configura√ß√£o Nodemailer
‚îÇ   ‚îú‚îÄ‚îÄ groqConfig.js         # Configura√ß√£o Groq SDK
‚îÇ   ‚îî‚îÄ‚îÄ .env                  # Vari√°veis de ambiente
‚îú‚îÄ‚îÄ controllers/              # L√≥gica de neg√≥cio
‚îÇ   ‚îú‚îÄ‚îÄ authController.js     # Autentica√ß√£o e usu√°rios
‚îÇ   ‚îú‚îÄ‚îÄ chatController.js     # Chat com Athena
‚îÇ   ‚îú‚îÄ‚îÄ questionarioController.js      # Question√°rios gerais
‚îÇ   ‚îî‚îÄ‚îÄ questionarioDiarioController.js # Question√°rios di√°rios
‚îú‚îÄ‚îÄ middlewares/              # Interceptadores
‚îÇ   ‚îî‚îÄ‚îÄ authenticate.js       # Autentica√ß√£o JWT
‚îú‚îÄ‚îÄ routes/                   # Defini√ß√£o de rotas
‚îÇ   ‚îú‚îÄ‚îÄ authRoutes.js         # Rotas de autentica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ chatRoutes.js         # Rotas do chat
‚îÇ   ‚îî‚îÄ‚îÄ questionarioRoutes.js # Rotas de question√°rios
‚îú‚îÄ‚îÄ templates/                # Templates de email
‚îÇ   ‚îî‚îÄ‚îÄ emailTemplates.js     # Templates HTML
‚îú‚îÄ‚îÄ server.js                 # Servidor principal
‚îú‚îÄ‚îÄ Dockerfile               # Configura√ß√£o Docker
‚îú‚îÄ‚îÄ package.json             # Depend√™ncias e scripts
‚îî‚îÄ‚îÄ README.md               # Documenta√ß√£o
```

## ü§ñ Sobre a Athena

A **Athena** √© uma intelig√™ncia artificial especializada em atendimento psicol√≥gico, desenvolvida com base em:

- **T√©cnicas Freudianas**: An√°lise de quest√µes emocionais profundas
- **Conceitos de Jung**: Arqu√©tipos e an√°lise da psique
- **Terapias Modernas**: TCC, medita√ß√£o, estoicismo e escrita reflexiva
- **Acolhimento Emocional**: Respostas emp√°ticas e personalizadas

### **Limita√ß√µes Importantes**
- **N√£o substitui profissionais**: A Athena √© uma ferramenta de apoio, n√£o um substituto para terapia profissional
- **Foco psicol√≥gico**: Especializada apenas em suporte emocional e psicol√≥gico
- **Redirecionamento**: Casos graves s√£o direcionados para ajuda profissional

## üîí Seguran√ßa

- **Criptografia**: Senhas criptografadas com bcrypt
- **JWT**: Tokens seguros para autentica√ß√£o
- **Verifica√ß√£o de Email**: Confirma√ß√£o obrigat√≥ria de email
- **Valida√ß√£o**: Valida√ß√£o rigorosa de dados de entrada
- **CORS**: Configura√ß√£o segura para requisi√ß√µes cross-origin

## üß™ Testes

```bash
# Executar testes (quando implementados)
npm test

# Executar testes em modo watch
npm run test:watch
```

## üìä Monitoramento

- **Logs**: Sistema de logs para debugging
- **M√©tricas**: Monitoramento de performance
- **Erros**: Tratamento centralizado de erros

## ü§ù Contribui√ß√£o

Contribui√ß√µes s√£o bem-vindas! Siga estes passos:

1. **Fork** este reposit√≥rio
2. **Crie** uma branch para sua feature (`git checkout -b feature/nova-funcionalidade`)
3. **Commit** suas altera√ß√µes (`git commit -m 'feat: adiciona nova funcionalidade'`)
4. **Push** para a branch (`git push origin feature/nova-funcionalidade`)
5. **Abra** um Pull Request

### **Padr√µes de Commit**
- `feat:` - Nova funcionalidade
- `fix:` - Corre√ß√£o de bug
- `docs:` - Documenta√ß√£o
- `style:` - Formata√ß√£o de c√≥digo
- `refactor:` - Refatora√ß√£o
- `test:` - Testes
- `chore:` - Tarefas de manuten√ß√£o

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa **MIT**. Veja o arquivo `LICENSE` para mais detalhes.

## üìû Suporte

- **Issues**: [GitHub Issues](link-para-issues)
- **Documenta√ß√£o**: [Wiki do Projeto](link-para-wiki)
- **Email**: suporte@mindtrack.com

## üôè Agradecimentos

- **Groq** pela API de IA
- **PostgreSQL** pelo banco de dados robusto
- **Comunidade Node.js** pelas ferramentas incr√≠veis

---

**Desenvolvido com ‚ù§Ô∏è pela equipe MindTracking**
